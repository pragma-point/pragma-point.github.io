<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">

    <title>{{ page.title }} - {{ site.title }}</title>
    <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}">
    <script defer src="{{ "/assets/js/carousel.js" | relative_url }}"></script>
    <script defer>
      document.addEventListener("DOMContentLoaded", () => {
        const toggle = document.getElementById("nav-toggle");
        const navClose = document.getElementById("nav-close");
        const menu = document.getElementById("nav-menu");

        toggle.addEventListener("click", () => {
          menu.classList.toggle("open");
          document.body.classList.toggle("menu-open");
        });

        navClose.addEventListener("click", () => {
          menu.classList.remove("open");
          document.body.classList.remove("menu-open");
        });

        // Language switching functionality
        const langToggle = document.getElementById("language-toggle");
        const langMenu = document.getElementById("language-menu");
        const langOptions = document.querySelectorAll(".language-option");

        langToggle.addEventListener("click", (e) => {
          e.preventDefault();
          langMenu.classList.toggle("show");
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", (e) => {
          if (!langToggle.contains(e.target) && !langMenu.contains(e.target)) {
            langMenu.classList.remove("show");
          }
        });

        langOptions.forEach(option => {
          option.addEventListener("click", (e) => {
            e.preventDefault();
            const newLang = e.target.dataset.lang;
            const currentPath = window.location.pathname;

            // Extract the current page path without language prefix
            let pagePath = currentPath;
            if (currentPath.startsWith('/en/')) {
              pagePath = currentPath.substring(3);
            } else if (currentPath.startsWith('/fr/')) {
              pagePath = currentPath.substring(3);
            } else if (currentPath.startsWith('/nl/')) {
              pagePath = currentPath.substring(3);
            }

            // Handle root page
            if (pagePath === '/' || pagePath === '') {
              pagePath = '/home/';
            }

            // Construct new URL
            const newUrl = `/${newLang}${pagePath}`;
            window.location.href = newUrl;
          });
        });
      });
    </script>
  </head>
  <body>
    <header>
      <div class="navbar-container">
        <div class="navbar">
          <div class="brand">
            <img src="/assets/img/logo-outline.png" alt="Pragma Point Logo">
          </div>
  
          <div id="nav-toggle" class="nav-toggle" aria-label="Toggle menu">
            <img src="/assets/img/bars-solid-full.svg" alt="Toggle Menu">
          </div>
  
          <nav id="nav-menu" class="nav-links">
            <img src="/assets/img/x-solid-full.svg" alt="Close Menu" id="nav-close" class="nav-close">
            <a href="{{ '/home/' | relative_url }}">Home</a>
            <a href="{{ '/contact/' | relative_url }}">Contact</a>
            
            <!-- <div class="language-dropdown">
              <button id="language-toggle" class="language-button" aria-label="Select language">
                <span id="current-lang">{{ page.lang | default: site.default_lang | upcase }}</span>
                <span class="dropdown-arrow">â–¼</span>
              </button>
              <div id="language-menu" class="language-menu">
                <a href="#" data-lang="en" class="language-option">EN</a>
                <a href="#" data-lang="fr" class="language-option">FR</a>
                <a href="#" data-lang="nl" class="language-option">NL</a>
              </div>
            </div> -->
          </nav>
        </div>
      </div>
      <div class="navbar-color-blocks">
        <div class="block"></div>
        <div class="block"></div>
        <div class="block"></div>
      </div>
    </header>

    <main class="content-container">
      <div class="content">
        {{ content }}
      </div>
    </main>

    <footer>        
      <div class="footer-brand">
        <img src="/assets/img/logo-outline.png" alt="Pragma Point Logo">
        <div>PragmaPoint</div>
      </div>                                                            
      
      <div class="footer-tagline">
        Specialized consultancy for the modern era. We bridge the gap between vintage wisdom and future-scale technology.
      </div>

      <div class="footer-links-container" style="margin-top: 20px;">
        <div class="footer-nav-links">
          <div class="footer-links-title">NAVIGATION</div>
          <a href="{{ '/home/' | relative_url }}">Home</a>
          <a href="{{ '/contact/' | relative_url }}">Contact</a>
        </div>
        <div class="footer-social-links">
          <div class="footer-links-title">SOCIAL</div>
          <a>LinkedIn</a>
          <a>Twitter</a>
          <a>Instagram</a>
        </div>
      </div>

      <div class="footer-spacer"></div>
    </footer>   
  </body>
</html>
