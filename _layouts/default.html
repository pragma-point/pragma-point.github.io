<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>{{ page.title }} - {{ site.title }}</title>
    <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}">
    <script defer>
      document.addEventListener("DOMContentLoaded", () => {
        const toggle = document.getElementById("nav-toggle");
        const menu = document.getElementById("nav-menu");
        toggle.addEventListener("click", () => {
          menu.classList.toggle("open");
        });

        // Language switching functionality
        const langToggle = document.getElementById("language-toggle");
        const langMenu = document.getElementById("language-menu");
        const langOptions = document.querySelectorAll(".language-option");

        langToggle.addEventListener("click", (e) => {
          e.preventDefault();
          langMenu.classList.toggle("show");
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", (e) => {
          if (!langToggle.contains(e.target) && !langMenu.contains(e.target)) {
            langMenu.classList.remove("show");
          }
        });

        langOptions.forEach(option => {
          option.addEventListener("click", (e) => {
            e.preventDefault();
            const newLang = e.target.dataset.lang;
            const currentPath = window.location.pathname;
            
            // Extract the current page path without language prefix
            let pagePath = currentPath;
            if (currentPath.startsWith('/en/')) {
              pagePath = currentPath.substring(3);
            } else if (currentPath.startsWith('/fr/')) {
              pagePath = currentPath.substring(3);
            } else if (currentPath.startsWith('/nl/')) {
              pagePath = currentPath.substring(3);
            }
            
            // Handle root page
            if (pagePath === '/' || pagePath === '') {
              pagePath = '/home/';
            }
            
            // Construct new URL
            const newUrl = `/${newLang}${pagePath}`;
            window.location.href = newUrl;
          });
        });
      });
    </script>
  </head>
  <body>
    <header class="navbar-container">
      <div class="navbar">
        <div class="brand">
          <img src="/assets/img/logo-outline.png" alt="Alt text">
        </div>
  
        <div id="nav-toggle" class="nav-toggle" aria-label="Toggle menu">
          Yoohoo
        </div>
  
        <nav id="nav-menu" class="nav-links">
          <a href="{{ '/home/' | relative_url }}">Home</a>
          <a href="{{ '/blog/' | relative_url }}">Blog</a>
          
          <!-- <div class="language-dropdown">
            <button id="language-toggle" class="language-button" aria-label="Select language">
              <span id="current-lang">{{ page.lang | default: site.default_lang | upcase }}</span>
              <span class="dropdown-arrow">â–¼</span>
            </button>
            <div id="language-menu" class="language-menu">
              <a href="#" data-lang="en" class="language-option">EN</a>
              <a href="#" data-lang="fr" class="language-option">FR</a>
              <a href="#" data-lang="nl" class="language-option">NL</a>
            </div>
          </div> -->
        </nav>
      </div>
    </header>

    <main class="container">
      {{ content }}
    </main>
  </body>
</html>
